(this.webpackJsonpcourseinfo=this.webpackJsonpcourseinfo||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(16),c=t.n(r),a=t(3),o=t(2),s=t.n(o),i=t(5),u=t(7),d=t(0);function l(e){var n=e.handleSubmit,t=Object(o.useState)({name:"",number:""}),r=Object(a.a)(t,2),c=r[0],s=r[1],l=function(e){s(Object(u.a)(Object(u.a)({},c),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(c),s({name:"",number:""})},children:[Object(d.jsxs)("div",{children:["name:"," ",Object(d.jsx)("input",{name:"name",value:c.name,onChange:l})]}),Object(d.jsxs)("div",{children:["number:"," ",Object(d.jsx)("input",{name:"number",value:c.number,onChange:l})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})}function j(e){var n=e.persons,t=e.search,r=e.onDeletePerson;return Object(d.jsx)("div",{children:n&&n.filter((function(e){var n;return null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(null===t||void 0===t?void 0:t.toLowerCase())})).map((function(e){return Object(d.jsxs)("p",{children:[e.name," ",e.number," \xa0",Object(d.jsx)("button",{onClick:function(){return r(e)},children:"Delete"})]},e.id)}))})}var b=t(4),f=t.n(b),m="/api/persons",h={getAll:function(){return f.a.get(m)},getById:function(e){return f.a.get(m+"/"+e)},deleteById:function(e){return f.a.delete(m+"/"+e)},update:function(e,n){return f.a.put(m+"/"+e,n)},create:function(e){return f.a.post(m,e)}},O=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),i=Object(a.a)(c,2),u=i[0],b=i[1],f=Object(o.useState)({error:!1,messages:""}),m=Object(a.a)(f,2),O=m[0],p=m[1];s.a.useEffect((function(){h.getAll().then((function(e){r(e.data)})).catch((function(e){console.log(e)}))}),[]);return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Phonebook"}),O.messages&&Object(d.jsx)("div",{className:O.error?"error":"success",children:O.messages}),Object(d.jsxs)("p",{children:["filter shown with ",Object(d.jsx)("input",{type:"text",onChange:function(e){b(e.target.value)}})]}),Object(d.jsx)("h1",{children:"Add a new"}),Object(d.jsx)(l,{handleSubmit:function(e){var n=t.find((function(n){return n.name===e.name}));if(n)return alert("".concat(e.name," is already added to phonebook, replace the old number with a new one")),void h.update(n.id,e).then((function(e){var c=t.map((function(t){return t.id===n.id?e.data:t}));r(c)})).catch((function(e){console.log(e.response.data.error,"errerrerrerr"),p({error:!0,messages:e.response.data.error})}));h.create(e).then((function(n){r(t.concat(n.data)),p({error:!1,messages:"Added ".concat(e.name)})})).catch((function(e){console.log(e.response.data.error,"errerrerrerr"),p({error:!0,messages:e.response.data.error})})),setTimeout((function(){p({error:!1,messages:""})}),3e3)}}),Object(d.jsx)(j,{persons:t,search:u,onDeletePerson:function(e){window.confirm("Delete ".concat(e.name," ?"))&&h.deleteById(e.id).then((function(n){r(t.filter((function(n){return n.id!==e.id})))}))}})]})};t(40);c.a.render(Object(d.jsx)(O,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.26793441.chunk.js.map