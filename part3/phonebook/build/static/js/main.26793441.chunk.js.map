{"version":3,"sources":["components/PersonForm.js","components/Persons.js","phoneBookservice.js","App.js","index.js"],"names":["PersonForm","handleSubmit","useState","name","number","newUser","setNewUser","handleOnChange","e","target","value","onSubmit","preventDefault","onChange","type","Persons","persons","search","onDeletePerson","filter","x","toLowerCase","includes","map","item","onClick","id","urlBase","api","getAll","axios","get","getById","deleteById","delete","update","data","put","create","post","App","setPersons","setSearch","error","messages","err","setErr","React","useEffect","phoneBookService","then","response","catch","console","log","className","checkExists","find","alert","res","newPersons","concat","setTimeout","window","confirm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.26793441.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\n\r\nexport default function PersonForm({ handleSubmit }) {\r\n  const [newUser, setNewUser] = useState({\r\n    name: '',\r\n    number: '',\r\n  });\r\n  const handleOnChange = (e) => {\r\n    setNewUser({ ...newUser, [e.target.name]: e.target.value });\r\n  };\r\n  const submitForm = (e) => {\r\n    e.preventDefault();\r\n    handleSubmit(newUser);\r\n    setNewUser({\r\n      name: '',\r\n      number: '',\r\n    });\r\n  };\r\n  return (\r\n    <form onSubmit={submitForm}>\r\n      <div>\r\n        name:{' '}\r\n        <input name='name' value={newUser.name} onChange={handleOnChange} />\r\n      </div>\r\n      <div>\r\n        number:{' '}\r\n        <input name='number' value={newUser.number} onChange={handleOnChange} />\r\n      </div>\r\n      <div>\r\n        <button type='submit'>add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Persons({ persons, search, onDeletePerson }) {\r\n  return (\r\n    <div>\r\n      {persons &&\r\n        persons\r\n          .filter((x) => x.name?.toLowerCase().includes(search?.toLowerCase()))\r\n          .map((item) => (\r\n            <p key={item.id}>\r\n              {item.name} {item.number} &nbsp;\r\n              <button onClick={() => onDeletePerson(item)}>Delete</button>\r\n            </p>\r\n          ))}\r\n    </div>\r\n  );\r\n}\r\n","import axios from 'axios';\r\nconst urlBase = '/api/persons';\r\nconst api = {\r\n  getAll: () => {\r\n    return axios.get(urlBase);\r\n  },\r\n  getById: (id) => {\r\n    return axios.get(urlBase + '/' + id);\r\n  },\r\n  deleteById: (id) => {\r\n    return axios.delete(urlBase + '/' + id);\r\n  },\r\n  update: (id, data) => {\r\n    return axios.put(urlBase + '/' + id, data);\r\n  },\r\n  create: (data) => {\r\n    return axios.post(urlBase, data);\r\n  },\r\n};\r\n\r\nexport default api;\r\n","import React, { useState } from 'react';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport phoneBookService from './phoneBookservice';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [search, setSearch] = useState('');\n  const [err, setErr] = useState({ error: false, messages: '' });\n\n  React.useEffect(() => {\n    phoneBookService\n      .getAll()\n      .then((response) => {\n        setPersons(response.data);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n  const handleSubmit = (newUser) => {\n    const checkExists = persons.find((x) => x.name === newUser.name);\n    if (checkExists) {\n      alert(\n        `${newUser.name} is already added to phonebook, replace the old number with a new one`,\n      );\n      phoneBookService\n        .update(checkExists.id, newUser)\n        .then((res) => {\n          const newPersons = persons.map((item) =>\n            item.id === checkExists.id ? res.data : item,\n          );\n          setPersons(newPersons);\n        })\n        .catch((err) => {\n          console.log(err.response.data.error, 'errerrerrerr');\n          setErr({\n            error: true,\n            messages: err.response.data.error,\n          });\n        });\n      return;\n    }\n    phoneBookService\n      .create(newUser)\n      .then((response) => {\n        setPersons(persons.concat(response.data));\n        setErr({\n          error: false,\n          messages: `Added ${newUser.name}`,\n        });\n      })\n      .catch((err) => {\n        console.log(err.response.data.error, 'errerrerrerr');\n        setErr({\n          error: true,\n          messages: err.response.data.error,\n        });\n      });\n\n    setTimeout(() => {\n      setErr({ error: false, messages: '' });\n    }, 3000);\n  };\n  const handleDeleteById = (data) => {\n    if (window.confirm(`Delete ${data.name} ?`)) {\n      phoneBookService.deleteById(data.id).then((res) => {\n        setPersons(persons.filter((x) => x.id !== data.id));\n      });\n    }\n  };\n  const handleOnChangeSearch = (e) => {\n    setSearch(e.target.value);\n  };\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      {err.messages && (\n        <div className={err.error ? 'error' : 'success'}>{err.messages}</div>\n      )}\n      <p>\n        filter shown with <input type='text' onChange={handleOnChangeSearch} />\n      </p>\n      <h1>Add a new</h1>\n      <PersonForm handleSubmit={handleSubmit} />\n      <Persons\n        persons={persons}\n        search={search}\n        onDeletePerson={handleDeleteById}\n      />\n    </div>\n  );\n};\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}